# Image Master: 차세대 옵시디언 이미지 관리 플러그인 상세 개발 계획서

**문서 버전: 1.0**
**작성일: 2025년 12월 25일**

---

## 1. 개요 및 문제 정의

### 1.1. 문제의 배경

옵시디언(Obsidian)은 마크다운 기반의 강력한 지식 관리 도구이지만, 이미지와 같은 첨부파일 관리에 있어서는 파편화된 경험을 제공합니다. 사용자는 여러 커뮤니티 플러그인을 조합하여 자신만의 워크플로우를 구축해야 하며, 이 과정에서 **보안 중심의 로컬 관리 방식**과 **편의성 중심의 클라우드 호스팅 방식** 사이에서 어려운 선택에 직면하게 됩니다. 이는 데이터 관리의 일관성을 해치고 사용자에게 불필요한 인지적 부담을 안겨줍니다.

### 1.2. 기존 솔루션의 한계

현재 시장의 주요 플러그인들은 다음과 같은 명확한 한계를 가지고 있습니다.

| 구분 | 로컬 관리 플러그인 (예: Attachment Management) | 클라우드 관리 플러그인 (예: Imgur, Image Auto Upload) |
|---|---|---|
| **장점** | - 데이터 완전 소유 (보안, 프라이버시)<br>- 오프라인 접근성<br>- 빠른 속도 | - 간편한 노트 공유 및 게시<br>- Vault 용량 최소화<br>- 다양한 기기에서의 접근성 |
| **단점** | - 노트 공유의 불편함<br>- 이미지 재사용 및 검색의 어려움<br>- Vault 용량 관리 부담 | - 외부 서비스 의존 (보안, 안정성 문제)<br>- 인터넷 연결 필수<br>- 복잡한 초기 설정 |

결론적으로, **기능의 분산**, **보안과 편의성의 상충**, **고급 기능(편집, 검색, 중복 제거)의 부재**는 사용자가 진정으로 원활한 이미지 관리 경험을 하는 데 큰 걸림돌이 되고 있습니다.

---

## 2. 제안 솔루션: 올인원 플러그인 "Image Master"

이러한 문제들을 근본적으로 해결하기 위해, 기존 플러그인들의 장점은 흡수하고 단점은 보완한 **차세대 올인원 이미지 관리 플러그인, "Image Master"**의 개발을 제안합니다.

### 2.1. 핵심 철학

- **하이브리드 (Hybrid)**: 로컬 저장의 보안성과 클라우드 동기화의 편의성을 결합하여 두 방식의 장점을 모두 제공합니다. (단, 클라우드 기능은 MVP 이후 구현)
- **올인원 (All-in-One)**: 이미지 저장, 관리, 검색, 정리에 필요한 모든 핵심 기능을 하나의 플러그인 안에서 해결합니다.
- **사용자 중심 (User-Centric)**: 복잡한 설정 없이도 즉시 가치를 제공하는 직관적인 UI와 고급 사용자를 위한 세부 설정 옵션을 모두 제공합니다.

---

## 3. MVP (Minimum Viable Product) 상세 명세

MVP 단계의 핵심 목표는 **"파편화된 로컬 이미지 관리 경험을 하나로 통합하여, 사용자가 파일 구조나 링크 깨짐에 대한 걱정 없이 콘텐츠 제작에만 집중할 수 있는 안정적이고 직관적인 기반을 제공하는 것"** 입니다. 이를 위해 다음 5가지 기능을 구현합니다.

| 기능 | 상세 구현 목표 |
|---|---|
| **1. 안정적인 로컬 파일 관리** | - 이미지 붙여넣기/드래그 시, 사전에 설정된 경로와 이름 규칙에 따라 자동 저장<br>- 경로 및 파일명 형식 커스터마이징 옵션 제공<br>- 파일 이동/이름 변경 시, 노트 내 관련 링크 자동 업데이트 |
| **2. 통합 이미지 갤러리** | - Vault 내 모든 이미지를 시각적으로 탐색할 수 있는 썸네일 기반의 커스텀 뷰 제공<br>- 갤러리에서 노트 편집창으로 이미지 드래그 앤 드롭하여 재사용<br>- 이미지 클릭 시, 해당 이미지가 사용된 노트를 확인하고 이동하는 기본 역참조 기능 |
| **3. 지능형 중복 감지** | - 이미지 추가 시, 파일 내용 기반의 고유 해시(Hash)값 계산<br>- 동일 해시 이미지가 존재할 경우, 새 파일 생성 대신 기존 이미지 링크를 재사용 (백그라운드 자동 처리) |
| **4. 안전한 "스마트 삭제"** | - 노트에서 이미지 링크 삭제 시, 파일을 즉시 영구 삭제하지 않고 '고아(Orphaned)' 상태로 분류<br>- 갤러리 내 별도 탭에서 '고아' 이미지 목록을 시각적으로 확인하고 선택적으로 영구 삭제 |
| **5. 기본 정보 패널 및 빠른 액션** | - 갤러리에서 이미지 선택 시, 파일명, 크기, 해상도, 연결된 노트 목록 등 핵심 메타데이터 표시<br>- 정보 패널 내에서 '파일 위치 열기', '이름 바꾸기' 등 빠른 액션 버튼 제공 |

---

## 4. 기술 스택 및 아키텍처

### 4.1. 기술 스택 선정 및 근거

| 구분 | 기술 | 선정 이유 및 대안 분석 |
|---|---|---|
| **프로그래밍 언어** | **TypeScript** | **(선정 이유)** 옵시디언 플러그인 개발의 공식 권장 언어[1]로, API와의 완벽한 호환성 및 타입 안정성을 통해 코드 품질과 유지보수성을 극대화합니다. 개발 단계에서 오류를 사전 감지할 수 있어 안정적인 플러그인 구축에 필수적입니다. |
| **UI 프레임워크** | **Svelte** | **(선정 이유)** 옵시디언 코어 앱 자체가 Svelte로 개발되어[2] 가장 네이티브한 통합과 최적의 성능을 보장합니다. 가상돔(Virtual DOM)을 사용하지 않는 컴파일러 기반으로, 번들 크기가 작고 실행 속도가 빨라 앱 전체 성능에 미치는 영향을 최소화합니다.<br>**- 대안 분석 (React/Vue):** React와 Vue는 더 큰 생태계를 가졌지만, 옵시디언 환경 내에서는 별도의 런타임을 필요로 하여 플러그인을 무겁게 만들고 네이티브한 느낌을 저해할 수 있습니다. 성능과 통합성 측면에서 Svelte가 명백한 우위를 가집니다. |
| **핵심 라이브러리** | **Node.js `crypto`** | 이미지 파일의 고유 해시(SHA-256) 값을 생성하여 '지능형 중복 감지' 기능을 구현하는 데 사용됩니다. 외부 의존성 없이 안정적으로 핵심 로직을 구현할 수 있습니다. |

### 4.2. 활용 옵시디언 API

| API 분류 | 주요 활용 함수 | 담당 기능 |
|---|---|---|
| **Vault API** | `vault.createBinary()`, `vault.getFiles()`, `vault.on('create', 'rename', 'delete')` | 파일 생성/스캔/이벤트 감지를 통한 로컬 파일 관리 |
| **Workspace API** | `workspace.registerView()`, `workspace.getLeavesOfType()` | '통합 이미지 갤러리' 커스텀 뷰 등록 및 관리 |
| **MetadataCache API** | `metadataCache.getFileCache()`, `metadataCache.on('resolve')` | 노트와 이미지 간의 링크 관계 분석 (역참조, 스마트 삭제) |
| **Editor API** | `editor.replaceSelection()` | 갤러리에서 에디터로 이미지 링크 삽입 |

---

## 5. MVP 개발 로드맵

총 개발 기간은 **4주**로 산정하며, 각 주차별 목표는 다음과 같습니다.

| 주차 | 주요 목표 | 세부 개발 내용 |
|---|---|---|
| **1주차** | **프로젝트 설정 및 기반 구축** | - 플러그인 개발 환경 설정 (TypeScript, Svelte)<br>- '안정적인 로컬 파일 관리' 기능 구현 (자동 저장, 링크 업데이트) |
| **2주차** | **핵심 뷰 및 데이터 처리** | - '통합 이미지 갤러리'의 기본 UI 프레임워크 구축<br>- '지능형 중복 감지'를 위한 해시 생성 및 비교 로직 구현 |
| **3주차** | **핵심 기능 완성** | - '스마트 삭제' 기능 구현 (고아 이미지 분류 로직)<br>- '기본 정보 패널' UI 및 데이터 연동<br>- 갤러리 뷰와 에디터 간 드래그 앤 드롭 기능 구현 |
| **4주차** | **통합 테스트 및 안정화** | - 모든 기능의 통합 테스트 및 버그 수정<br>- 사용자 설정 화면 구현<br>- 최종 빌드 및 커뮤니티 플러그인 등록 준비 |

---

## 6. 향후 확장 계획 (Post-MVP)

MVP 출시 이후, 사용자 피드백을 바탕으로 다음과 같은 고급 기능들을 순차적으로 개발하여 플러그인을 완성해 나갈 계획입니다.

- **클라우드 동기화**: 사용자의 S3, Dropbox 등 개인 클라우드 계정과 연동하여 이미지를 백업하고, 공유 시 URL을 자동 생성하는 하이브리드 기능
- **고급 이미지 편집**: 갤러리 내에서 이미지 자르기, 회전, 압축 등 간단한 편집 기능 제공
- **OCR 통합**: 이미지 내 텍스트를 자동으로 추출하여 검색 가능하도록 지원
- **고급 검색 및 필터링**: 태그, 날짜, 해상도 등 다양한 조건으로 이미지를 필터링하는 기능

---

## 7. 참고 자료

[1] Obsidian Developer Docs. (2025). *Build your first plugin*. Retrieved from https://docs.obsidian.md/Plugins/Getting+started/Build+a+plugin
[2] Obsidian. (2025). *Obsidian's Tech Stack*. Retrieved from https://obsidian.md/about
